"use strict";var app=angular.module("app",["ngMaterial","ngMessages"]);app.run(function($rootScope){$rootScope.setSuccessMessage=function(message){$rootScope.messageType="success",$rootScope.message=message},$rootScope.setWarningMessage=function(message){$rootScope.messageType="warning",$rootScope.message=message},$rootScope.setErrorMessage=function(message){$rootScope.messageType="error",$rootScope.message=message},$rootScope.setInformationMessage=function(message){$rootScope.messageType="information",$rootScope.message=message},$rootScope.setInformationMessage("This is the status bar.")}),app.controller("mainController",function($scope,$rootScope,$http){}),app.controller("statisticalDataController",function($scope,$rootScope,request){$scope.statisticalDataList=[],$scope.fileName="",$scope.fileContent="",$scope.uploadFile=function(){var file=document.getElementById("fileForUpload").files[0];if(file){$scope.fileName=file.name;var reader=new FileReader;reader.readAsText(file,"UTF-8"),reader.onload=function(event){$scope.fileContent=event.target.result},reader.onerror=function(event){$scope.fileContent="error reading file"}}},$scope.getStatisticalData=function(){request.get("StatisticalData/get").then(function(response){$scope.statisticalDataList=response.data}).catch(function(response){$rootScope.setErrorMessage(response.data.error+":"+response.data.message)})},$scope.saveStatisticalData=function(){var data={fileName:$scope.fileName,fileContent:$scope.fileContent};request.post("StatisticalData/save",data).then(function(response){$scope.getStatisticalData(),$rootScope.setSuccessMessage("File added successfully")}).catch(function(response){$rootScope.setErrorMessage(response.data.error+":"+response.data.message)})},$scope.deleteStatisticalData=function(index){var data={id:$scope.statisticalDataList[index].id};request.post("StatisticalData/delete",data).then(function(response){$scope.getStatisticalData(),$rootScope.setSuccessMessage("File deleted successfully")}).catch(function(response){$rootScope.setErrorMessage(response.data.error+":"+response.data.message)})},$scope.getStatisticalData()}),app.directive("customOnChange",function(){return{restrict:"A",link:function(scope,element,attrs){var onChangeFunc=scope.$eval(attrs.customOnChange);element.bind("change",onChangeFunc)}}}),app.factory("request",function($http,$q,$location){var webServiceUrl=$location.protocol()+"://"+$location.host()+":"+$location.port()+"/",request={post:function(webServiceName,pData){var deferred=$q.defer();return $http.post(webServiceUrl+webServiceName,pData).then(function(response){deferred.resolve(response)},function(response){deferred.reject(response)}),deferred.promise},get:function(webServiceName){var deferred=$q.defer();return $http.get(webServiceUrl+webServiceName).then(function(response){deferred.resolve(response)},function(response){deferred.reject(response)}),deferred.promise}};return request});